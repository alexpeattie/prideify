var Prideify=function(i,t){if("undefined"==typeof i&&(i="[data-pride]"),"undefined"==typeof t&&(t={}),this instanceof Prideify)this.options=t,this.prideifyImage(i);else{var e;if(window.jQuery&&i.jquery&&(e=jQuery.makeArray(i)),"string"==typeof i){var s=document.querySelectorAll(i);e=Array.prototype.slice.call(s)}[].concat(e||i).forEach(function(i){new Prideify(i,t)})}};Prideify.prototype.prideifyImage=function(i){var t=new Image;switch(t.crossOrigin="anonymous",t.src=i.src,typeof this.options.crossOriginProxy){case"string":t.src=this.options.crossOriginProxy+t.src;case"boolean":this.options.crossOriginProxy&&(t.src="http://crossorigin.me/"+t.src)}t.onload=function(){i.src=this.render(t),i.classList.add(this.options.renderedClass||"prideified"),t=null,"function"==typeof this.options.afterRender&&this.options.afterRender(i)}.bind(this)},Prideify.prototype.render=function(i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=i.width,this.height=this.canvas.height=i.height,this.context.drawImage(i,0,0,this.width,this.height),this.addRainbow(i);var t=this.canvas.toDataURL();return this.removeCanvas(),t},Prideify.prototype.stripes=[[255,62,24],[252,154,0],[255,216,0],[57,234,124],[11,178,255],[152,90,255]],Prideify.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)},Prideify.prototype.addRainbow=function(i){for(var t=0;6>t;t++)this.addStripe(i,t)},Prideify.prototype.addStripe=function(i,t){var e=this.options.customStripes||this.stripes,s=i.height/e.length,r=t*s,n=e[t].join(", ");this.context.fillStyle="rgba("+n+", 0.5)",this.context.fillRect(0,r,i.width,s)},window.jQuery&&(jQuery.fn.prideify=function(i){Prideify(this,i)});